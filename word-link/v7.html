<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Word Chain</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial,Helvetica,sans-serif}
body{
background:white;
color:#111;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
overflow:hidden;
transition:.3s;
}

/* subtle stripes */
body::before{
content:"";
position:fixed;
top:0;left:0;width:100%;height:100%;
background:repeating-linear-gradient(
45deg,
rgba(0,0,0,0.03),
rgba(0,0,0,0.03) 2px,
transparent 2px,
transparent 8px
);
z-index:-1;
}

.dark{
background:#111;
color:white;
}
.dark::before{
background:repeating-linear-gradient(
45deg,
rgba(255,255,255,0.05),
rgba(255,255,255,0.05) 2px,
transparent 2px,
transparent 8px
);
}

.container{
text-align:center;
width:90%;
max-width:500px;
animation:fadeIn .5s ease;
}

h1{font-size:32px;margin-bottom:10px}

.word{font-size:28px;margin:15px 0;font-weight:bold}

.timer{font-size:22px;margin:10px 0}

input{
padding:10px;
width:100%;
margin-top:10px;
border:2px solid #111;
background:white;
transition:.2s;
}

.dark input{
background:#222;
color:white;
border-color:white;
}

button{
padding:10px 20px;
margin:5px;
border:2px solid #111;
background:white;
cursor:pointer;
transition:.2s;
}

.dark button{
background:#222;
color:white;
border-color:white;
}

button:hover{transform:scale(1.05)}

.score{margin-top:10px;font-size:18px}
.history{
margin-top:10px;
max-height:100px;
overflow-y:auto;
font-size:14px;
}

.popup{
position:fixed;
top:0;left:0;
width:100%;height:100%;
background:rgba(0,0,0,.5);
display:none;
justify-content:center;
align-items:center;
animation:fadeIn .3s ease;
}

.popup-content{
background:white;
padding:20px;
border-radius:10px;
width:90%;
max-width:400px;
text-align:center;
animation:slideUp .3s ease;
}

.dark .popup-content{
background:#222;
color:white;
}

@keyframes fadeIn{
from{opacity:0}to{opacity:1}
}

@keyframes slideUp{
from{transform:translateY(20px);opacity:0}
to{transform:translateY(0);opacity:1}
}
</style>
</head>
<body>

<div class="container">
<h1>Word Chain</h1>
<div class="word" id="currentWord">Press Play</div>
<div class="timer" id="timer">10.000</div>

<input id="input" placeholder="Type word..." disabled>

<div>
<button id="playBtn">Start</button>
<button id="pauseBtn" disabled>Pause</button>
<button id="settingsBtn">Settings</button>
</div>

<div class="score">Score: <span id="score">0</span></div>
<div class="history" id="history"></div>
</div>

<!-- Popup -->
<div class="popup" id="popup">
<div class="popup-content">
<h2 id="popupTitle"></h2>
<p id="popupMessage"></p>
<button onclick="closePopup()">Close</button>
</div>
</div>

<!-- Settings -->
<div class="popup" id="settingsPopup">
<div class="popup-content">
<h2>Settings</h2>

<button onclick="toggleDark()">Toggle Dark Mode</button>
<button onclick="toggleMS()">Toggle Milliseconds</button>
<button onclick="resetGame()">Reset Game</button>
<button onclick="goHome()">Go Home</button>
<button onclick="window.location.href='https://yourlink.com'">Visit My Link</button>

<br><br>
<button onclick="closeSettings()">Close</button>
</div>
</div>

<script>
const words=["apple","tiger","river","grape","elephant","night","table","earth","house","zebra"];

let currentWord="";
let timer=10;
let baseTimer=10;
let interval;
let running=false;
let score=0;
let showMS=true;
let usedWords=[];

const input=document.getElementById("input");
const timerEl=document.getElementById("timer");
const wordEl=document.getElementById("currentWord");
const historyEl=document.getElementById("history");

function randomWord(){
return words[Math.floor(Math.random()*words.length)];
}

function startGame(){
running=true;
document.getElementById("pauseBtn").disabled=false;
input.disabled=false;
if(!currentWord){
currentWord=randomWord();
wordEl.textContent=currentWord;
usedWords=[currentWord];
}
startTimer();
}

function startTimer(){
clearInterval(interval);
let startTime=Date.now();
interval=setInterval(()=>{
if(!running) return;
let elapsed=(Date.now()-startTime)/1000;
let remaining=timer-elapsed;
if(remaining<=0){
clearInterval(interval);
gameOver();
return;
}
timerEl.textContent=showMS?remaining.toFixed(3):Math.ceil(remaining);
},10);
}

function gameOver(){
running=false;
input.disabled=true;
showPopup("Game Over!","You ran out of time & your finishing score was: "+score);
}

function submitWord(){
if(!running) return;

let val=input.value.toLowerCase().trim();
if(!val) return;

if(usedWords.includes(val)){
showPopup("Error!","You already used that word!");
return;
}

if(val[0]!==currentWord[currentWord.length-1]){
showPopup("Error","Word must start with '"+currentWord[currentWord.length-1]+"'");
return;
}

let speedBonus=Math.floor(timer*5);
score+=val.length*10+speedBonus;
document.getElementById("score").textContent=score;

historyEl.innerHTML+=val+"<br>";
usedWords.push(val);

currentWord=val;
wordEl.textContent=currentWord;

timer=Math.max(3,baseTimer - usedWords.length*0.3);
input.value="";
startTimer();
}

function togglePause(){
if(!running){
running=true;
startTimer();
document.getElementById("pauseBtn").textContent="Pause";
}else{
running=false;
clearInterval(interval);
document.getElementById("pauseBtn").textContent="Play";
}
input.disabled=!running;
}

function toggleDark(){
document.body.classList.toggle("dark");
}

function toggleMS(){
showMS=!showMS;
}

function showPopup(title,msg){
running=false;
clearInterval(interval);
document.getElementById("popupTitle").textContent=title;
document.getElementById("popupMessage").textContent=msg;
document.getElementById("popup").style.display="flex";
}

function closePopup(){
document.getElementById("popup").style.display="none";
}

function openSettings(){
running=false;
clearInterval(interval);
document.getElementById("settingsPopup").style.display="flex";
}

function closeSettings(){
document.getElementById("settingsPopup").style.display="none";
}

function resetGame(){
score=0;
usedWords=[];
currentWord="";
timer=baseTimer;
document.getElementById("score").textContent=0;
historyEl.innerHTML="";
wordEl.textContent="Press Play";
input.value="";
input.disabled=true;
running=false;
clearInterval(interval);
closeSettings();
}

function goHome(){
resetGame();
closeSettings();
}

document.getElementById("playBtn").onclick=startGame;
document.getElementById("pauseBtn").onclick=togglePause;
document.getElementById("settingsBtn").onclick=openSettings;

input.addEventListener("keydown",e=>{
if(e.key==="Enter") submitWord();
});
</script>

</body>
</html>
